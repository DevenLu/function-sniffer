!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self)["function-sniffer"]=r()}(this,function(){"use strict";function p(e,r){var n,t,o=e.split("."),f=r,c={success:!0,func:function(){}};if("object"!=typeof r)throw new Error("base is wrong type.");for(t=0;t<o.length;t++){if(n=o[t],"object"!=typeof f)return c.success=!1,c;if(!(n in f))return c.success=!1,c;f=f[n]}return c.func=f,c}var r=[];return{run:function(){var e=Array.prototype.slice.call(arguments);return function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(r.length<1||"object"!=typeof r[0])throw new Error("Sniffer.run parameter error");var t=r[0].name,o=r[0].subscribe||!1,f=r[0].prompt||"",c=r[0].base||window,i=r[0].showPromptFn||window.alert,s=Array.prototype.slice.call(r).slice(1),u=p(t,c);if(u.success){o=!1;try{return u.func.apply(u.func,s)}catch(e){"undefined"!=typeof console&&console.log}}else f&&i(f);if(o){var a={name:""};a.name=t,a.base=c,a.args=s,e.push(a)}}.apply(void 0,[r].concat(e))},trigger:function(e){return function(e,r){if("object"!=typeof r)throw new Error("Sniffer.trigger parameter error");var n,t,o=r.name||"",f=r.base||window,c=[];if(o.length<1)throw new Error("parameter name is require");for(n=0;n<e.length;n++)if((t=e[n]).name==o){var i=p(o,f);if(i.success)try{return i.func.apply(i.func,t.args)}catch(e){"undefined"!=typeof console&&console.log}}else c.push(t);e=c}(r,e)}}});
